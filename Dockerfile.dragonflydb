# Use the official DragonflyDB image as the base
FROM docker.dragonflydb.io/dragonflydb/dragonfly

# Expose the default DragonflyDB port
EXPOSE 6379

# Create data directory
RUN mkdir -p /data

# Command to run DragonflyDB with production settings
CMD dragonfly \
    --logtostderr \
    --bind=0.0.0.0 \
    --dir=/data \
    --dbfilename=dump \
    --snapshot_cron="*/10 * * * *" \
    --maxmemory=1gb \
    --requirepass=${DRAGONFLY_PASSWORD:-changeme123}
